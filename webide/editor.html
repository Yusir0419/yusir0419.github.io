<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1e1e1e">
    <title>WebIDE - 编辑器</title>
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/editor.css">
</head>
<body>
    <!-- 主容器 -->
    <div id="app" class="editor-page">
        <!-- 顶部工具栏 -->
        <div class="toolbar">
            <button id="btn-back" class="btn-icon" title="返回">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                    <path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"/>
                </svg>
            </button>
            <div class="toolbar-title" id="project-name">项目名称</div>
            <div class="toolbar-actions">
                <button id="btn-save" class="btn-icon" title="保存">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                        <path d="M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"/>
                    </svg>
                </button>
                <button id="btn-more" class="btn-icon" title="更多">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="currentColor">
                        <path d="M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm0-240q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm0-240q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- 主体区域 -->
        <div class="editor-container">
            <!-- 文件树侧边栏 -->
            <div id="file-tree-sidebar" class="file-tree-sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-title">文件</div>
                    <button id="btn-toggle-tree" class="btn-icon-small" title="收起">
                        <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="currentColor">
                            <path d="M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z"/>
                        </svg>
                    </button>
                </div>
                <div id="file-tree" class="file-tree">
                    <!-- 文件树由 JS 动态生成 -->
                </div>
            </div>

            <!-- 编辑器区域 -->
            <div class="editor-area">
                <!-- Ace 编辑器 -->
                <div id="ace-editor"></div>

                <!-- 空状态 -->
                <div id="editor-empty" class="editor-empty">
                    <div class="empty-icon">📄</div>
                    <div class="empty-text">请选择一个文件开始编辑</div>
                </div>
            </div>
        </div>

        <!-- 底部状态栏 -->
        <div class="statusbar">
            <div class="statusbar-item" id="status-file">未打开文件</div>
            <div class="statusbar-item" id="status-position">Ln 1, Col 1</div>
            <div class="statusbar-item" id="status-language">纯文本</div>
        </div>
    </div>

    <!-- 右键菜单 -->
    <div id="context-menu" class="context-menu hidden">
        <!-- 文件菜单 -->
        <div class="menu-group" id="menu-file">
            <div class="menu-item" data-action="new-file">📄 新建文件</div>
            <div class="menu-item" data-action="new-folder">📁 新建文件夹</div>
            <div class="menu-divider"></div>
            <div class="menu-item" data-action="rename">✏️ 重命名</div>
            <div class="menu-item" data-action="delete" class="danger">🗑️ 删除</div>
        </div>
    </div>

    <!-- 对话框 -->
    <div id="dialog-overlay" class="dialog-overlay hidden">
        <div class="dialog">
            <div class="dialog-header" id="dialog-title">提示</div>
            <div class="dialog-body">
                <input type="text" id="dialog-input" class="dialog-input" placeholder="请输入">
            </div>
            <div class="dialog-footer">
                <button id="dialog-cancel" class="btn-secondary">取消</button>
                <button id="dialog-confirm" class="btn-primary">确定</button>
            </div>
        </div>
    </div>

    <!-- 加载脚本 -->
    <script src="lib/ace/ace.js"></script>
    <script src="js/bridge.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/dialog.js"></script>
    <script src="js/fileTree.js"></script>
    <script src="js/editor.js"></script>
</body>
</html>
